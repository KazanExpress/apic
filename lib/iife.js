var omnic=function(t){"use strict";var r=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};const e=Object.getOwnPropertyNames;function n(t,r,e){return t&&r?e(t,r):!t&&r?r:!r&&t?t:void 0}const o=(t,r)=>n(t,r,(t,r)=>(function(){t(...arguments),r(...arguments)})),c=(t,r)=>o(r,t),i=(t,r)=>n(t,r,(t,r)=>{const e=t=>t.match(/\/?[\w\d\.\:\@]+/g).join(""),n=t.split("//");return n.length>1?n[0]+"//"+e(n[1]+"/"+r):e(t+"/"+r)}),a=(t,e)=>n(t,e,(t,e)=>r({},t,e)),s=(t,r)=>n(t,r,(t,r)=>r),f=(t,r)=>n(t,r,(t,r)=>{const n={beforeEach:o,afterEach:c,path:i,headers:a,body:s,integrity:s,keepalive:s,referrer:s,params:s,cache:s,credentials:s,mode:s,redirect:s,referrerPolicy:s},f=e(n),u={};for(const e of f){const o=t[e],c=r[e];u[e]=n[e](o,c)}return u});function u(...t){return t.reduce(f)}const h=["GET","POST","PUT","DELETE","OPTIONS","CONNECT","TRACE","PATCH"],p=/(?:\w*:\/)?\/.*/gm,l=t=>"string"==typeof t||!!t&&m(t.valueOf)&&"string"==typeof t.valueOf(),y=t=>"[object Object]"===Object.prototype.toString.apply(t),m=t=>"function"==typeof t,d=t=>y(t)&&l(t.method)&&h.some(r=>r===t.method),O=t=>l(t)||!!t&&!y(t),E=t=>l(t)||"number"==typeof t,g=t=>{const r=t=>r=>void 0!==r?`${encodeURIComponent(t)}=${encodeURIComponent(r)}`:"";return Object.keys(t).map(e=>Array.isArray(t[e])?t[e].map(r(e)).filter(t=>t).join("&"):r(e)(t[e])).filter(t=>t).join("&")};class P{request(t,r){return[t,r]=this.processParams(t,r),console.log(t),fetch(t,r)}processParams(t,r){if(r.params){let e=g(r.params).trim();e&&(t=t+(~t.indexOf("?")?"&":"?")+e)}return[t,r]}}const T="__omnic__",v="__omnic_route__";const b=function(){try{if(isNaN.apply(null,{}))return function(t){return function(){try{return Promise.resolve(t.apply(this,arguments))}catch(t){return Promise.reject(t)}}}}catch(t){}return function(t){return function(){try{return Promise.resolve(t.apply(this,Array.prototype.slice.call(arguments)))}catch(t){return Promise.reject(t)}}}}();function j(t,r,e){return e?r?r(t):t:(t=Promise.resolve(t),r?t.then(r):t)}function C(t){const r=(r,e)=>{var n=this;if(O(r)&&(r={path:r}),m(t))return N(t,u(r,this.config));if(y(t)){if(d(t)){e&&!E(t.path)&&(t.path=e);let o=u(r,this.config,t);const c=b(function(t){O(t)&&(t={path:t}),t&&(o=u(r,n.config,t));let{path:e,beforeEach:c,afterEach:i}=o,a=function(t){const r=["body","integrity","keepalive","referrer","cache","credentials","headers","mode","redirect","referrerPolicy","method","params"],e={};for(const n of r)e[n]=t[n];return y(e.body)&&(e.body=JSON.stringify(e.body)),e}(function(t,r){var e={};for(var n in t)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(o,["path","beforeEach","afterEach"]));return c&&([e,a]=c(e,a)),j(n.adapter.request(e,a),function(t){let r;return function(t,r){var e=t();return e&&e.then?e.then(r):r(e)}(function(){if(i)return j(i(t),function(t){r=t});r=t},function(){return r})})});return c[T]=!0,c}return e&&!E(this.config.path)&&(this.config.path=e),function(t,r){const e={};for(const n in t)m(t[n])&&(e[n]=N(t[n],r,n));return e}(t,u(r,this.config))}return console.error("[Omnic] Error - invalid route base: ",t),t};return r[v]=!0,this.config.path&&p.test(this.config.path)?r():r}function N(t,r,e){return O(r)&&(r={path:r}),t[T]?t:t[v]?t(r,e):function(){return t(...arguments)(r,e)}}const A=(...t)=>{var r=new P,e={};t&&t.forEach(t=>{void 0!==P&&t instanceof P?r=t:"object"===typeof t?e=t:l(t)?e={path:t}:console.error("Warning! Wrong config for route:",t)});const n=C.bind({config:e,adapter:r});return n.with=A,n},_={};h.forEach(t=>{_[t]=(r=>(O(r)?r={path:r}:r||(r={}),r.method=t,A()(r)))});const S=A(),{CONNECT:w,DELETE:I,GET:R,OPTIONS:U,PATCH:k,POST:D,PUT:G,TRACE:H}=_;return t.default=S,t.omnicFactory=A,t.CONNECT=w,t.DELETE=I,t.GET=R,t.OPTIONS=U,t.PATCH=k,t.POST=D,t.PUT=G,t.TRACE=H,t}({});
